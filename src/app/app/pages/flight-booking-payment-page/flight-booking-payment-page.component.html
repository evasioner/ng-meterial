<div class="p-flight-booking-page" id="wrap">
    <!-- header -->
    <app-flight-header [headerType]="headerType" [headerConfig]="headerConfig"></app-flight-header>

    <!-- contents -->
    <div *ngIf="viewModel.loadingFlag" class="content-area" id="contents">
        <form [formGroup]="pageForm" (ngSubmit)="onPay()">
            <div class="page-contents-type2">
                <div class="contents-box-title">
                    <div class="contents-icon">
                        <span class="icon-payment"></span>
                    </div>
                    <h2 class="title">결제 정보를 입력해 주세요.</h2>
                    <p class="sub-title">
                        결제 정보 암호화로 안전한 거래를 진행합니다.
                        <br />
                        개인 정보를 안전하게 보호하며 다른 용도로 사용하지 않습니다.
                    </p>
                </div>
                <div *ngIf="false" class="contents-item">
                    <h3 class="contents-title2 line2">할인 쿠폰/노랑 마일리지 적용</h3>
                    <div class="row-group">
                        <div class="row">
                            <h4 class="row-title">쿠폰 선택(3)</h4>
                            <div class="select-box line">
                                <select name="" id="">
                                    <option value="" selected>미주노선 동방항공 묶음 쿠폰 (5%)</option>
                                    <option value="">옵션2</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="row-title">마일리지 사용</div>
                            <div class="row col2 mileage">
                                <div class="input line no-pd">
                                    <input type="number" placeholder="" class="align-r" value="0">
                                </div>
                                <button class="btn lg default font-md-b" role="button">전액사용</button>
                            </div>
                        </div>
                        <div class="row col2">
                            <h4 class="row-title">보유 마일리지</h4>
                            <div class="align-r"><span class="text">35,700</span><span class="icon sm mileage"></span></div>
                        </div>
                    </div>
                </div>
                <div *ngIf="false" class="contents-item">
                    <!-- 계좌이체 선택시 카드 프로모션 부분은 비활성화 -->
                    <h3 class="contents-title2 line2">카드 프로모션
                        <a href="#" class="text-link"><span class="text">무이자 할부</span>
                            <span class="icon sm information2"></span>
                        </a>
                    </h3>
                    <div class="row-group">
                        <div class="row">
                            <h4 class="row-title">프로모션 변경</h4>
                            <div class="select-box line">
                                <select name="" id="">
                                    <option value="" selected>현대카드 프리미엄</option>
                                    <option value="">성인</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="contents-item">
                    <h3 class="contents-title2 line2">최종 결제 금액</h3>
                    <div class="item-group">
                        <div *ngIf="false" class="item-row col">
                            <div class="left">표준 금액({{ viewModel.passengerCount }}인)</div>
                            <div class="right">{{ viewModel.amount.amountSum | number }} 원</div>
                        </div>
                        <div *ngIf="false" class="item-row col">
                            <div class="left">쿠폰 할인</div>
                            <div class="right">- 82,130원</div>
                        </div>
                        <div class="item-row col last">
                            <div class="left">결제 금액</div>
                            <div class="right">{{ viewModel.amount.amountSum | number }} 원</div>
                        </div>
                    </div>
                </div>
                <div class="contents-item">
                    <h3 class="contents-title2 line2">결제수단 선택</h3>
                    <div class="tab-wrap">
                        <div class="tab-header type3">
                            <a class="tab-header-item active">신용카드</a>
                        </div>
                        <div class="tab-body">

                            <!-- 신용카드 선택했을때 보임 -->
                            <div class="tab-item active" formArrayName="payment">
                                <div class="row-group">
                                    <div class="row auto">
                                        <h4 class="row-title">결제 구분</h4>
                                        <label *ngFor="let item of viewModel.paymentStyleList; index as index;" class="radio" (change)="changePaymentList($event, index)">
                                            <input type="radio" class="radio-control-input" [checked]="item.checked">
                                            <span class="radio-control-text">{{ item.text }}</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- ts 파일에서 클래스명 변경 [traveler-item] -->
                                <div [class]="getClassName()">

                                    <div *ngFor="let paymentItem of payment.controls; index as index;" [formGroupName]="index" class="row-group">
                                        <h4 *ngIf="viewModel.paymentStyleList[1].checked" class="contents-title2 line2 flex-list">
                                            {{ (index + 1) }}번째 탑승자 <span class="ml-auto font-lg-b color-point2">{{ viewModel.passengerFareList[index].amountSum | number }}원</span>
                                        </h4>
                                        <div class="row-group">
                                            <div class="row">
                                                <h4 class="row-title">카드 소유</h4>
                                                <div class="select-box line">
                                                    <select formControlName="cardHolderTypeCode">
                                                        <option *ngFor="let item of viewModel.useCardList" [value]="item.code">{{ item.text }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">카드 종류</h4>
                                                <div class="select-box line">
                                                    <select formControlName="cardMasterCode">
                                                        <option *ngFor="let item of viewModel.cardList" [value]="item.code">{{ item.text }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">카드 번호</h4>
                                                <div class="input line">
                                                    <input type="text" formControlName="cardNo" placeholder="카드번호 입력" maxlength="16" [class.valid-error]="paymentItem.get('cardNo').errors && (paymentItem.get('cardNo').dirty || paymentItem.get('cardNo').touched)">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">소유주명</h4>
                                                <div class="input line">
                                                    <input type="text" formControlName="cardHolderName" placeholder="소유주명 영어 입력" [class.valid-error]="paymentItem.get('cardHolderName').errors && (paymentItem.get('cardHolderName').dirty || paymentItem.get('cardHolderName').touched)" oninput="this.value = this.value.toUpperCase()">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">생년월일</h4>
                                                <div class="input line">
                                                    <input type="text" formControlName="cardHolderBirthday" placeholder="생년월일 입력(8자리)" maxlength="8" [class.valid-error]="paymentItem.get('cardHolderBirthday').errors && (paymentItem.get('cardHolderBirthday').dirty || paymentItem.get('cardHolderBirthday').touched)">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">유효 기간</h4>
                                                <div class="input line">
                                                    <input type="text" formControlName="cardValidPeriod" placeholder="유효기간 입력(월/년)" maxlength="4" [class.valid-error]="paymentItem.get('cardValidPeriod').errors && (paymentItem.get('cardValidPeriod').dirty || paymentItem.get('cardValidPeriod').touched)">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">비밀번호</h4>
                                                <div class="input line">
                                                    <input type="password" formControlName="cardPassword" placeholder="비밀번호 앞 두자리 입력(2자리)" maxlength="2" [class.valid-error]="paymentItem.get('cardPassword').errors && (paymentItem.get('cardPassword').dirty || paymentItem.get('cardPassword').touched)">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h4 class="row-title">할부기간</h4>
                                                <div class="select-box line">
                                                    <select formControlName="cardQuotaMonth">
                                                        <option *ngFor="let item of viewModel.cardMonthList" [value]="item.code">{{ item.text }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ul class="text-list mt20">
                                    <li>체크카드는 할부 결제가 불가합니다.</li>
                                    <li>기명 법인카드(탑승자와 카드에 명기된 이름이 동일한 경우)의 경우 탑승자 본인 카드로 선택하세요.</li>
                                </ul>
                                <div class="btn-group mt30">
                                    <button class="btn lg default" role="button">결제하기</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>