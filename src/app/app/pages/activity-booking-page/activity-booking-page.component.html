<div id="wrap" class="p-activity-booking">

    <!-- header -->
    <app-activity-header [headerType]="headerType" [headerConfig]="headerConfig"></app-activity-header>

    <!-- contents -->
    <div id="contents">
        <form [formGroup]="pageForm" (ngSubmit)="onPay()" #f="ngForm">
            <div class="page-contents-type2">
                <div class="contents-box-title">
                    <div class="contents-icon">
                        <span class="icon-payment"></span>
                    </div>
                    <h2 class="title">결제 정보를 입력해 주세요.</h2>
                    <p class="sub-title">
                        결제 정보 암호화로 안전한 거래를 진행합니다.
                        <br />
                        개인 정보를 안전하게 보호하며 다른 용도로 사용하지 않습니다.
                    </p>
                </div>
                <div *ngIf="false" class="contents-item">
                    <h3 class="contents-title2 line2">할인 쿠폰/노랑 마일리지 적용</h3>
                    <div class="row-group">
                        <div class="row">
                            <h4 class="row-title">쿠폰 선택(3)</h4>
                            <div class="select-box line">
                                <select name="" id="">
                                    <option value="" selected>액티비티 상품 카테고리 할인 (5%)</option>
                                    <option value="">옵션2</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="row-title">마일리지 사용</div>
                            <div class="row col2 mileage">
                                <div class="input line no-pd">
                                    <input type="number" placeholder="" class="align-r" value="0">
                                </div>
                                <button class="btn lg default font-md-b" role="button">전액사용</button>
                            </div>
                        </div>
                        <div class="row col2">
                            <h4 class="row-title">보유 마일리지</h4>
                            <div class="align-r"><span class="text">35,700</span><span class="icon sm mileage"></span></div>
                        </div>
                    </div>
                </div>
                <div class="contents-item">
                    <h3 class="contents-title2 line2">최종 결제 금액</h3>
                    <div class="item-group">
                        <div *ngIf="false" class="item-row col">
                            <div class="left">표준 금액(인)</div>
                            <div class="right">{{ viewModel.amountSum | number }} 원</div>
                        </div>
                        <div *ngIf="false" class="item-row col">
                            <div class="left">쿠폰 할인</div>
                            <div class="right">- 82,130원</div>
                        </div>
                        <div class="item-row col last">
                            <div class="left">결제 금액</div>
                            <div class="right">{{ viewModel.amountSum | number }} 원</div>
                        </div>
                    </div>
                </div>

                <div class="contents-item">
                    <h3 class="contents-title2 line2">결제수단 선택</h3>
                    <div class="tab-wrap">
                        <div class="tab-header type3">
                            <a class="tab-header-item active">신용카드</a>
                        </div>
                        <div class="tab-body">

                            <!-- 신용카드 선택했을때 보임 -->
                            <div class="tab-item active" formArrayName="payment">
                                <div class="row-group" *ngFor="let paymentItem of payment.controls; index as index;" [formGroupName]="index">
                                    <div class="row">
                                        <h4 class="row-title">카드 소유</h4>
                                        <div class="select-box line">
                                            <select formControlName="cardHolderTypeCode" [attr.id]="'cardHolderTypeCode'" [class.valid-error]="paymentItem.get('cardHolderTypeCode').errors && (f.submitted || paymentItem.get('cardHolderTypeCode').dirty || paymentItem.get('cardHolderTypeCode').touched)">
                                                <option *ngFor="let item of viewModel.useCardList" [value]="item.code">
                                                    {{ item.text }}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">카드 종류</h4>
                                        <div class="select-box line">
                                            <select formControlName="cardMasterCode" [attr.id]="'cardMasterCode'" [class.valid-error]="paymentItem.get('cardMasterCode').errors && (f.submitted || paymentItem.get('cardMasterCode').dirty || paymentItem.get('cardMasterCode').touched)">
                                                <option *ngFor="let item of viewModel.cardList" [value]="item.code">
                                                    {{ item.text }}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">카드 번호</h4>
                                        <div class="input line">
                                            <input formControlName="cardNo" [attr.id]="'cardNo'" [numOnly]="paymentItem.get('cardNo')" [class.valid-error]="paymentItem.get('cardNo').errors && (f.submitted || paymentItem.get('cardNo').dirty || paymentItem.get('cardNo').touched)" maxlength="16" type="text" placeholder="카드번호 입력">
                                            <ng-container *ngIf="paymentItem.get('cardNo').errors">
                                                <span *ngIf="paymentItem.get('cardNo').errors.required" class="valid-msg">카드 번호는 필수값입니다.</span>
                                                <span *ngIf="paymentItem.get('cardNo').errors.maxlength" class="valid-msg">영문 성의 글자수는 16자 까지 입력 가능합니다.</span>
                                                <span *ngIf="paymentItem.get('cardNo').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardNo').errors.invalidMsg}}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">소유주 명</h4>
                                        <div class="input line">
                                            <input formControlName="cardHolderName" [attr.id]="'cardHolderName'" [enOnly]="paymentItem.get('cardHolderName')" [class.valid-error]="paymentItem.get('cardHolderName').errors && (f.submitted || paymentItem.get('cardHolderName').dirty || paymentItem.get('cardHolderName').touched)" oninput="this.value = this.value.toUpperCase()" type="text" placeholder="소유주명 영어 입력">
                                            <ng-container *ngIf="paymentItem.get('cardHolderName').errors">
                                                <span *ngIf="paymentItem.get('cardHolderName').errors.required" class="valid-msg">소유주 명은
                                                    필수값입니다.</span>
                                                <span *ngIf="paymentItem.get('cardHolderName').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardHolderName').errors.invalidMsg}}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">생년월일</h4>
                                        <div class="input line">
                                            <input formControlName="cardHolderBirthday" [attr.id]="'cardHolderBirthday'" [numOnly]="paymentItem.get('cardHolderBirthday')" [class.valid-error]="paymentItem.get('cardHolderBirthday').errors && (f.submitted || paymentItem.get('cardHolderBirthday').dirty || paymentItem.get('cardHolderBirthday').touched)" maxlength="8" type="text" placeholder="생년월일 입력(8자리)">
                                            <ng-container *ngIf="paymentItem.get('cardHolderBirthday').errors">
                                                <span *ngIf="paymentItem.get('cardHolderBirthday').errors.required" class="valid-msg">생년월일은 필수값입니다.</span>
                                                <span *ngIf="paymentItem.get('cardHolderBirthday').errors.minLength" class="valid-msg">생년월일은 8자로 입력 해주세요.</span>
                                                <span *ngIf="paymentItem.get('cardHolderBirthday').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardHolderBirthday').errors.invalidMsg}}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">유효기간</h4>
                                        <div class="input line">
                                            <input formControlName="cardValidPeriod" [attr.id]="'cardValidPeriod'" [numOnly]="paymentItem.get('cardValidPeriod')" [class.valid-error]="paymentItem.get('cardValidPeriod').errors && (f.submitted || paymentItem.get('cardValidPeriod').dirty || paymentItem.get('cardValidPeriod').touched)" maxlength="4" type="text" placeholder="유효기간 입력">
                                            <ng-container *ngIf="paymentItem.get('cardValidPeriod').errors">
                                                <span *ngIf="paymentItem.get('cardValidPeriod').errors.required" class="valid-msg">유효기간은 필수값입니다.</span>
                                                <span *ngIf="paymentItem.get('cardValidPeriod').errors.minLength" class="valid-msg">유효기간은 4자로 입력 해주세요.</span>
                                                <span *ngIf="paymentItem.get('cardValidPeriod').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardValidPeriod').errors.invalidMsg}}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">CVC번호</h4>
                                        <div class="input line">
                                            <input formControlName="cardCvc" [attr.id]="'cardCvc'" [numOnly]="paymentItem.get('cardCvc')" [class.valid-error]="paymentItem.get('cardCvc').errors && (f.submitted || paymentItem.get('cardCvc').dirty || paymentItem.get('cardCvc').touched)" maxlength="3" type="text" placeholder="CVC번호 입력 (3자리)">
                                            <ng-container *ngIf="paymentItem.get('cardCvc').errors">
                                                <span *ngIf="paymentItem.get('cardCvc').errors.required" class="valid-msg">CVC번호는 필수값입니다.</span>
                                                <span *ngIf="paymentItem.get('cardCvc').errors.minLength" class="valid-msg">CVC번호는은 3자로 입력 해주세요.</span>
                                                <span *ngIf="paymentItem.get('cardCvc').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardCvc').errors.invalidMsg}}</span>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">비밀번호</h4>
                                        <div class="input line">
                                            <div class="input line">
                                                <input formControlName="cardPassword" [numOnly]="paymentItem.get('cardPassword')" [class.valid-error]="paymentItem.get('cardPassword').errors && (f.submitted || paymentItem.get('cardPassword').dirty || paymentItem.get('cardPassword').touched)" type="password" placeholder="비밀번호 앞 두자리 입력(2자리)" maxlength="2">
                                                <ng-container *ngIf="false">
                                                    <span *ngIf="paymentItem.get('cardPassword').errors.invalidMsg" class="valid-msg">{{paymentItem.get('cardPassword').errors.invalidMsg}}</span>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <h4 class="row-title">할부기간</h4>
                                        <div class="select-box line">
                                            <select formControlName="cardQuotaMonth" [attr.id]="'cardQuotaMonth'" [class.valid-error]="paymentItem.get('cardQuotaMonth').errors && (f.submitted || paymentItem.get('cardQuotaMonth').dirty || paymentItem.get('cardQuotaMonth').touched)">
                                                <option *ngFor="let item of viewModel.cardMonthList" [value]="item.code">{{ item.text }}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <ul class="text-list mt20">
                                    <li>체크카드는 할부 결제가 불가합니다.</li>
                                    <li>기명 법인카드(탑승자와 카드에 명기된 이름이 동일한 경우)의 경우 탑승자 본인 카드로 선택하세요.</li>
                                </ul>
                                <div class="btn-group mt30">
                                    <button class="btn lg default" role="button">결제하기</button>
                                </div>
                            </div>

                        </div>
                    </div>
                    <ul class="text-list mt20">
                        <li>예약 완료까지는 30초에서 2분가량 소요될 수 있습니다.</li>
                        <li>예약 완료 버튼은 1번만 클릭하시기 바라며 클릭 후에는 최종 완료될 때까지 기다려 주시기 바랍니다.</li>
                        <li>완료 전에 창을 닫으면 이중 결제 또는 예약 에러가 발생할 수 있습니다.</li>
                    </ul>
                </div>
            </div>
        </form>
    </div>
</div>